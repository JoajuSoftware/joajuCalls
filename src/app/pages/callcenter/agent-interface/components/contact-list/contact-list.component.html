<div class="contact-list-container">
    <h2>Lista de contactos a llamar</h2>
    
    <div class="search-container">
      <span class="p-input-icon-left">
        <input pInputText type="text" (input)="applyFilterGlobal($event, 'contains')" placeholder="Buscar..." />
      </span>
    </div>
    
    <p-table 
      #dt 
      [value]="contacts()" 
      [paginator]="true" 
      [rows]="5"
      [rowHover]="true"
      [globalFilterFields]="['name', 'phone']"
      styleClass="p-datatable-sm"
      [scrollable]="true"
      responsiveLayout="scroll"
      [tableStyle]="{'min-width': '50rem'}"
      emptyMessage="No hay contactos pendientes para llamar">
      
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="name">Nombre <p-sortIcon field="name"></p-sortIcon></th>
          <th pSortableColumn="phone">Tel√©fono <p-sortIcon field="phone"></p-sortIcon></th>
          <th pSortableColumn="status">Estado <p-sortIcon field="status"></p-sortIcon></th>
          <th>Acciones</th>
        </tr>
      </ng-template>
      
      <ng-template pTemplate="body" let-contact>
        <tr [ngClass]="'status-' + contact.status">
          <td>{{contact.name}}</td>
          <td>{{contact.phone}}</td>
          <td>
            <p-tag 
              [value]="getStatusLabel(contact.status)" >
            </p-tag>
          </td>
          <td>
            <button 
              pButton 
              icon="pi pi-phone" 
              class="p-button-sm p-button-success"
              (click)="callContact(contact)" 
              [disabled]="isAnyCallActive() || contact.status === 'completed'"
              pTooltip="Llamar">
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
</div>

<section class="flex flex-col justify-content-center align-items-center">
  <article class="mx-auto text-center p-2 bg-white border border-indigo-600">
    <form
      [formGroup]="data"
      class="flex gap-6 justify-content-between align-items-center"
      action=""
    >
      <div class="form-group">
        <p-floatlabel variant="on">
          <p-date-picker
            formControlName="initDate"
            dataType="string"
            size="small"
            variant="filled"
            inputformat="dd-mm-yy"
            dateFormat="yy-mm-dd"
          />
          <label for="on_label">Fecha de inicio</label>
        </p-floatlabel>
      </div>
      <div class="form-group">
        <p-floatlabel variant="on">
          <p-date-picker
            formControlName="endDate"
            dataType="string"
            size="small"
            variant="filled"
            inputformat="dd-mm-yy"
            dateFormat="yy-mm-dd"
          />
          <label for="on_label">Fecha de fin</label>
        </p-floatlabel>
      </div>
      <div class="form-group">
        <!-- <label for="queues">Cola</label> -->
        <p-multi-select
          [options]="teams()"
          appendTo="body"
          optionLabel="n_team"
          placeholder="Seleccione una cola"
          formControlName="selectedTeams"
        ></p-multi-select>
      </div>
      <p-button
        (onClick)="submitForm()"
        type="submit"
        label="Buscar"
        icon="pi pi-search"
        form="form"
      ></p-button>
    </form>
  </article>
</section>

<section class="mt-4">
  @if(agentsConnectionsData().length > 0){

  <p-table
    [columns]="headers()"
    [value]="agentsConnectionsData()"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template #header let-columns>
      <tr>
        @for( column of columns; track column) {
        <th>
          {{ column }}
        </th>
        }
      </tr>
    </ng-template>
    <ng-template #body let-data let-column>
      <tr class="text-sm">
        <td>
          {{ data.tipo_estado }}
        </td>
        <td>
          {{ data.agente }}
        </td>
        <td>
          {{ data.n_agente }}
        </td>
        <td>
          {{ data.descanso }}
        </td>
        <td>
          {{ data.inicio }}
        </td>
        <td>
          {{ data.fin }}
        </td>
        <td>
          {{ data.n_team }}
        </td>
        <td>
          {{ data.tiempo }}
        </td>
      </tr>
    </ng-template>
  </p-table>
  }
</section>
